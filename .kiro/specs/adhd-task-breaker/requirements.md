# Requirements Document

## Introduction

ADHD Task Breaker is a full-stack web application designed for users with ADHD. The application allows users to input a large task, which a DigitalOcean AI agent breaks down into smaller, manageable sub-tasks. Each sub-task is accompanied by an emoji to provide visual persistence and engagement. Completing all sub-tasks of a big task earns the user a coin, which can be spent playing a claw machine mini-game to win collectible toys. A user profile displays completion stats and a toy collection gallery.

## Glossary

- **Task Breaker**: The core system that accepts user tasks and coordinates with the AI agent to produce sub-tasks
- **Big Task**: A top-level task entered by the user that the AI agent breaks into smaller pieces
- **Sub-Task**: A smaller, actionable step generated by the AI agent from a Big Task
- **DigitalOcean Agent**: The external AI service hosted on DigitalOcean that decomposes Big Tasks into Sub-Tasks and assigns emojis
- **Coin**: A virtual currency unit awarded to the user upon completing all Sub-Tasks of a Big Task
- **Claw Machine**: An interactive mini-game where users spend Coins to attempt winning collectible Toy items
- **Toy**: A collectible item stored in Supabase that a user can win from the Claw Machine
- **Toy Collection**: The set of Toys a user has won, displayed on the user profile
- **User Profile**: A page showing the user's completion statistics and Toy Collection
- **Supabase**: The backend-as-a-service platform used for authentication, database, and storage

## Requirements

### Requirement 1

**User Story:** As a user with ADHD, I want to type in a big task and have it broken down into smaller steps, so that I can tackle work without feeling overwhelmed.

#### Acceptance Criteria

1. WHEN a user submits a Big Task description, THE Task Breaker SHALL send the description to the DigitalOcean Agent and display the resulting Sub-Tasks within 10 seconds
2. WHEN the DigitalOcean Agent returns Sub-Tasks, THE Task Breaker SHALL display a single emoji assigned by the DigitalOcean Agent for the Big Task, wrapped inside a circular progress bar
3. WHEN a user submits an empty or whitespace-only Big Task description, THE Task Breaker SHALL reject the submission and display a validation message
4. IF the DigitalOcean Agent fails to respond within 10 seconds, THEN THE Task Breaker SHALL display a friendly retry prompt to the user
5. WHEN a user activates the voice input button, THE Task Breaker SHALL use the Web Speech API to transcribe spoken words into the Big Task input field
6. WHEN the Web Speech API is not supported by the browser, THE Task Breaker SHALL hide the voice input button and rely on text input only

### Requirement 2

**User Story:** As a user with ADHD, I want to check off sub-tasks and see visual progress, so that I stay motivated and can track what I have done.

#### Acceptance Criteria

1. WHEN a user marks a Sub-Task as complete, THE Task Breaker SHALL visually distinguish the completed Sub-Task from incomplete Sub-Tasks
2. WHEN all Sub-Tasks of a Big Task are marked complete, THE Task Breaker SHALL mark the Big Task as complete and award the user exactly 1 Coin
3. WHILE a Big Task has at least one incomplete Sub-Task, THE Task Breaker SHALL display a circular progress bar around the Big Task emoji showing the ratio of completed Sub-Tasks to total Sub-Tasks
4. WHEN a user marks a Sub-Task as complete, THE Task Breaker SHALL persist the completion state to Supabase immediately

### Requirement 8

**User Story:** As a user with ADHD, I want to edit, delete, and add sub-tasks to my big tasks, so that I can adjust my plan as I go without starting over.

#### Acceptance Criteria

1. WHEN a user edits a Big Task name, THE Task Breaker SHALL update the Big Task name in Supabase and reflect the change on screen immediately
2. WHEN a user edits a Sub-Task name, THE Task Breaker SHALL update the Sub-Task name in Supabase and reflect the change on screen immediately
3. WHEN a user deletes a Big Task, THE Task Breaker SHALL remove the Big Task and all associated Sub-Tasks from Supabase and remove them from the screen
4. WHEN a user deletes a Sub-Task, THE Task Breaker SHALL remove the Sub-Task from Supabase and recalculate the circular progress bar for the parent Big Task
5. WHEN a user adds a new Sub-Task to an existing Big Task, THE Task Breaker SHALL persist the new Sub-Task to Supabase and recalculate the circular progress bar for the parent Big Task
6. WHEN a user deletes the last remaining Sub-Task of a Big Task, THE Task Breaker SHALL keep the Big Task visible with a zero-progress circular progress bar

### Requirement 3

**User Story:** As a user with ADHD, I want to spend my earned coins on a claw machine game, so that I have a fun reward for finishing my tasks.

#### Acceptance Criteria

1. WHEN a user initiates a Claw Machine game, THE Task Breaker SHALL deduct exactly 1 Coin from the user's balance before starting the game
2. WHEN a user attempts to play the Claw Machine with 0 Coins, THE Task Breaker SHALL prevent the game from starting and display a message indicating insufficient Coins
3. WHEN the Claw Machine game concludes with a win, THE Task Breaker SHALL add the won Toy to the user's Toy Collection in Supabase
4. WHEN the Claw Machine game concludes, THE Task Breaker SHALL display the outcome (win or miss) with an animated visual response

### Requirement 4

**User Story:** As a user with ADHD, I want to see my profile with stats and toy collection, so that I feel a sense of accomplishment and can show off my progress.

#### Acceptance Criteria

1. WHEN a user navigates to the User Profile, THE Task Breaker SHALL display the total number of completed Big Tasks
2. WHEN a user navigates to the User Profile, THE Task Breaker SHALL display the user's current Coin balance
3. WHEN a user navigates to the User Profile, THE Task Breaker SHALL display the user's Toy Collection as a visual gallery
4. WHEN a user has zero Toys in the Toy Collection, THE Task Breaker SHALL display an encouraging empty-state message prompting the user to earn Coins

### Requirement 5

**User Story:** As a user with ADHD, I want the interface to be visually engaging, calm, and easy to navigate, so that I can use the app without cognitive overload.

#### Acceptance Criteria

1. THE Task Breaker SHALL render all primary screens (task input, task list, claw machine, profile) within a single-page application using client-side routing
2. THE Task Breaker SHALL use a consistent color palette, typography, and spacing system across all screens
3. WHEN transitioning between screens, THE Task Breaker SHALL apply smooth animated transitions lasting between 200 and 400 milliseconds
4. THE Task Breaker SHALL display emoji visuals at a minimum size of 32 pixels to maintain readability and visual persistence
5. THE Task Breaker SHALL use a mobile-responsive layout that adapts to screen widths from 320 pixels to 1440 pixels
6. THE Task Breaker SHALL design all interactive elements (buttons, checkboxes, task cards) with a minimum touch target size of 44 by 44 pixels for mobile usability

### Requirement 6

**User Story:** As a user, I want to sign in securely so that my tasks, coins, and toys are saved to my account.

#### Acceptance Criteria

1. WHEN a user is not authenticated, THE Task Breaker SHALL redirect the user to a sign-in screen before granting access to any protected feature
2. WHEN a user signs in through Supabase authentication, THE Task Breaker SHALL create or retrieve the user's profile and redirect to the task input screen
3. WHEN a user signs out, THE Task Breaker SHALL clear the local session and redirect to the sign-in screen

### Requirement 7

**User Story:** As a user with ADHD, I want to see my active and past big tasks, so that I can pick up where I left off or review what I have accomplished.

#### Acceptance Criteria

1. WHEN a user views the task list screen, THE Task Breaker SHALL display two tabs labeled "Active" and "Done" for filtering Big Tasks by completion state
2. WHEN a user selects the "Active" tab, THE Task Breaker SHALL display only Big Tasks that have at least one incomplete Sub-Task, sorted by creation date with newest first
3. WHEN a user selects the "Done" tab, THE Task Breaker SHALL display only Big Tasks where all Sub-Tasks are marked complete, sorted by completion date with newest first
4. WHEN a user selects a Big Task from either tab, THE Task Breaker SHALL expand the Big Task to show all associated Sub-Tasks with their completion states
5. WHEN a user has no Big Tasks in the active tab, THE Task Breaker SHALL display an encouraging empty-state message prompting the user to create a first task
6. WHEN a user has no Big Tasks in the done tab, THE Task Breaker SHALL display an encouraging message prompting the user to complete tasks to earn Coins
